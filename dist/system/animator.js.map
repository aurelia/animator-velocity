{"version":3,"sources":["animator.js"],"names":[],"mappings":"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","file":"animator.js","sourceRoot":"/source/","sourcesContent":["import Velocity from 'velocity';\r\nimport 'velocity/velocity.ui';\r\nimport {animationEvent} from 'aurelia-templating';\r\n\r\nexport class VelocityAnimator {\r\n  constructor(container) {\r\n    this.animationStack = [];\r\n    this.isAnimating = false;\r\n    this.options = {\r\n        duration: 50,\r\n        easing:'linear'\r\n      };\r\n    this.easings = Object.assign(Velocity.Easings,this.easings);\r\n    this.effects = Object.assign(Velocity.Redirects,this.effects);\r\n  }\r\n\r\n_triggerDOMEvent(eventType, element) {\r\n    var evt = new window.CustomEvent(animationEvent[name], {bubbles: true, cancelable: true, detail: element});\r\n    document.dispatchEvent(evt);\r\n  }\r\n\r\n  animate(element,nameOrProps,options,silent) {\r\n    this.isAnimating = true;\r\n    let _this = this;\r\n    let overrides = {\r\n      complete:function(el){\r\n        _this.isAnimating = false;\r\n        if(!silent) _this._triggerDOMEvent(el,\"animateDone\");\r\n        if(options && options.complete) options.complete.apply(this,arguments);\r\n      }\r\n    };\r\n    if(!element) return Promise.reject(new Error(\"invalid first argument\"));\r\n\r\n    //resolve selectors\r\n    if(typeof element === \"string\") element = this.container.querySelectorAll(element);\r\n\r\n    //if nothing was found or no element was passed resolve the promise immediatly\r\n    if(!element || element.length === 0) return Promise.resolve(element);\r\n\r\n    if(!silent) this._triggerDOMEvent(element,\"animateBegin\");\r\n\r\n    //try to run the animation\r\n    var opts = Object.assign({},this.options,options,overrides);\r\n    var p = Velocity(element, nameOrProps, opts);\r\n\r\n    //reject the promise if Velocity didn't return a Promise due to invalid arguments\r\n    if(!p) return Promise.reject(new Error(\"invalid element used for animator.animate\"));\r\n    return p;\r\n  }\r\n\r\n  _addMultipleEventListener(el, s, fn) {\r\n      var evts = s.split(' '),\r\n        i, ii;\r\n\r\n      for (i = 0, ii = evts.length; i < ii; ++i) {\r\n        el.addEventListener(evts[i], fn, false);\r\n      }\r\n    }\r\n    _addAnimationToStack(animId) {\r\n      if(this.animationStack.indexOf(animId) < 0) {\r\n        this.animationStack.push(animId);\r\n      }\r\n    }\r\n   _removeAnimationFromStack(animId) {\r\n      var idx = this.animationStack.indexOf(animId);\r\n      if(idx > -1) {\r\n          this.animationStack.splice(idx, 1);\r\n      }\r\n    }\r\n    _performSingleAnimate(element,effectName,eventName=undefined){\r\n    var _this = this;\r\n    var options={};\r\n    if (eventName) \r\n      this._triggerDOMEvent(eventName+\"Begin\", element);\r\n\r\n    let overrides = {\r\n          complete:elements=>{\r\n          _this.isAnimating = false;\r\n          if(eventName) _this._triggerDOMEvent(eventName+\"Done\",element);\r\n          if(options && options.complete) options.complete.apply(_this,arguments);\r\n        }\r\n      }\r\n    var opts = Object.assign({},_this.options,options,overrides);\r\n    this.animate(element, effectName, opts, eventName);   \r\n  }\r\n  \r\nenter(element,effectName,options){  \r\n    let _this  = this;\r\n    return new Promise( (resolve, reject) => {\r\n        _this._performSingleAnimate(element,effectName || 'fadeIn','enter')\r\n    });\r\n  }\r\n\r\n  leave(element,effectName,options) {\r\n   var _this = this;\r\n    return new Promise( (resolve, reject) => {               \r\n        _this._performSingleAnimate(element,effectName || 'fadeOut','leave');\r\n    });\r\n  }\r\n}\r\n"]}